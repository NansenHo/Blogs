# Java 变量与数据类型

在 Java 中，变量分为两种：

1. 基本类型
2. 引用类型
  
## 基本类型

1. 整数类型（整型）
   -  byte 占用**一个字节**
   -  short 占用**两个字节**
   -  int 占用**四个字节**
   -  long 占用**八个字节**
2. 浮点数类型
   - float 占用**四个字节**
   - double 占用**八个字节**
3. 字符类型
   - char 占用**两个字节**
4. 布尔类型
   - boolean

> Java 语言对布尔类型的存储并没有做规定，
>
> 虽然理论上存储 `boolean` 类型只需要 1 bit，但实际上通常 JVM 内部会把 `boolean` 表示为 **4 字节整数**。

### 计算机内存的基本结构

计算机内存最小存储单位是字节（byte）

1 个 byte 是一个 8 位二进制数，即 8 个 bit。

其二进制范围是 `00000000` ~ `11111111`，换算成 10 进制是 0 ~ 255，换算成十六进制是 `00` ~ `ff`。

```bash
1 byte === 8 bit
1 k === 1024 byte
1 M === 1024 K
1 G === 1024 M
1 T === 1024 G
```

```bash
4T = 4 x 1024G
   = 4 x 1024 x 1024M
   = 4 x 1024 x 1024 x 1024K
   = 4 x 1024 x 1024 x 1024 x 1024
   = 4398046511104
```

### 整型

对于整数类型，Java 只定义了**带符号的整型**

因此，最高位的 bit 表示符号位，0 表示正数，1 表示负数。

> 二进制的最高位指的是，最左边的数字。

各种整型能表示的最大范围为：

- byte：-128 ~ 127
- short: -32768 ~ 32767
- int: -2147483648 ~ 2147483647
- long: -9223372036854775808 ~ 9223372036854775807

```java
public class Main {
	public static void main(String[] args) {
		int i = 2147483647;
		int i2 = -2147483648;
		int i3 = 2_000_000_000;
		int i4 = 0xff0000; // 16进制表示的 16711680
		int i5 = 0b1000000000;
		long l = 9000000000000000000L; // Long 型的结尾要加上 L。
	}
}
```

### 浮点型

浮点类型就是小数

因为小数用 **科学计数法** 表示的时候，小数点是可以“浮动”的

如 $1234.5$ 可以表示成 $12.345*10^2$ 或者 $123.45*10$ 等

对于 `float` 类型，结尾需要加上 `f` 后缀。

- 浮点数可以表示的范围非常大，最大可表示 $3.4 * 10^38$

- double 类型最大可表示 $1.79 * 10^308$

```java
float f1 = 3.14f;
float f2 = 3.14e38f; // 科学计数法表示的 3.14*10^38

double d = 1.79e308;
double d2 = -1.79e308;
double d3 = 4.9e-324; // 科学计数法表示的 4.9*10^-324
```

> 因为 `long`, `float` 等字面值中均是数字开头，字母结尾，
> 
> 故变量名不能数字开头，避免与变量值歧义，编译不过。

### 字符类型

字符类型 `char` 表示一个字符

Java 的 `char` 类型除了可以表示**标准的 ASCII 外**，还可以表示一个**Unicode 字符**。

注意，`char` 类型使用单引号 `'`，且仅有一个字符，要和双引号 `"` 的字符串类型区分开。

```java
char a = 'A';
char z = '中';
System.out.println(a); // a
System.out.println(z); // 中
```

## 引用类型

### String 字符串

引用类型最常用的就是 `String` 字符串。

```java
String s = "hello";
```

引用类型的变量类似于 C 语言的设计，它内部存储一个"地址"，指向某个对象在内存的位置。

## 其他

### 常量

定义变量的时候，如果加上 `final` 修饰符，这个变量就会变成常量。

```java
final double PI = 3.14;
```

常量在初始化赋值之后，就不能再次对其赋值，否则会导致编译错误。

根据习惯，常量变量名通常全部大写。

### `var` 关键字

```java
StringBuilder sb = new StringBuilder();

// 如果不想写这么长的变量类型
var sb = new StringBuilder()
```

使用 `var` 后，编译器会根据赋值语句自动推断出变量 `sb` 的类型

> 对于编译器来说，`var sb = new StringBuilder()` 实际上会变成 `StringBuilder sb = new StringBuilder()`。
>
> 仅仅是让我们少写了变量名而已。

> 注意：
> 
> - 尽量将变量定义在尽可能小的作用域。
>
> - 不要重复使用变量名。
