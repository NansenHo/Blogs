# 写单元测试的好处 {ignore=true}

[toc]

## 新增功能 & 修 bug

### 不要靠运气编程

当我们开发完成一个新功能，并测试该功能没问题后。
但有可能新功能的代码影响到了既有功能，引入了 bug。
但这个时候我们也不可能去把旧功能又一个一个都测试一遍。
一般这种时候，我们就是交给测试人员去测了。

运气好，测试人员测出来了；
运气不好，最后这个 bug 就被领导/客户发现；

以上就是靠运气编程。

但是如果我们对每个功能都写了测试，那旧功能里引入 bug 后，
我们立马就能知道。

这样将大大提高我们开发时的自信心，大幅提到我们的专业素养。

## 重构/改善代码

尽管大家大都不敢重构公司代码，因为很容易引入 bug 。
但在公司重构代码非常必要。

因为**项目代码质量越低，添加新功能/修 bug 的难度也越大**。

还**技术债务**的唯一办法就是重构。

但是重构很容易引入新的 bug，这又让很多人对重构望而却步。

但如果有了测试的话，那就可以放心大胆地重构了。

因为一旦在老功能里引入了新的 bug，我们立马就能知道。

## check 别人提交的代码

同样，如果同事提交了一个添加新功能/修bug分支，

我们怎么知道这些代码有没有影响到老功能呢？

我们不可能去点一遍之前的所有功能。

同样需要测试去跑一遍之前的所有功能。

> 测试是项目代码质量非常重要的**安全网**。

## 单元测试就是活文档

单元测试就是一个**可执行的文档**。

你要带一个新人，有了单元测试之后，你也不需要去跟他

> 阅读源码的技巧之一就是，先去看它的测试。

## 单元测试逆向改善程序设计

如果你的程序设计得很烂的话，你的单测也会很难写。

如果你要写单测的话，

那你的程序设计得也要很良好。

程序设计需要：

1. 单一职责
2. 高内聚
3. 低耦合

否则就会很难写单测。