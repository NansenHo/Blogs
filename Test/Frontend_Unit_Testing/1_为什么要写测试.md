# 为什么要写测试 {ignore=true}

[toc]

## 写代码分两步

我们写代码其实都分两步：

1. 写代码
2. **调试验证**

而往往我们需要反复地去调试验证，这一步才是最花费时间的。

单元测试替换的就是调试验证的过程。

## 单元测试的优势-举例

比如你开发了一个删除人员的功能，

那当我们调试验证的时候，一共需要

1. 填写人员相关信息
2. 确认信息并添加人员
3. 点击删除按钮
4. 确认并删除人员

整整四步才可以。

其中但凡一步出了差错，又要从头再来一遍这四步。

**这个手动调试的过程每次都是重复的**。

如果写测试的话，我们只需要写一遍，之后都可以避免这一遍遍重复的调试。

```typescript
it('should remove staff', () => {
  repository.updateStaff = vi.fn()
  const staff = createStaff('Jack')
  staffs.add(staff)

  removeStaff(staff)

  expect(staff.state).toBe(StaffState.REMOVED)
  expect(staffs.length).toBe(0)
})
```

单元测试来替代了手动测试，让测试变成自动化的操作。
这样大大提高了开发效率。