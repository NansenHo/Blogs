# 大图预览功能

### 需求描述

不能使用 el-image 组件，使用原生的 image 元素。要实现大图预览。

### 技术方案

1. 自己写大图预览组件 ❌
2. 自己写大图预览 DOM ❌
3. 使用 element-ui 的 el-image
4. 使用 el-image-viewer  [el-image-viewer 大图预览 | 掘金](https://juejin.cn/post/6948670179740139534)
5. 是用别的第三方库单独来做这个大图预览

最后选用了方案 4 

1. 不需要再引入新的库
2. 也不用重复造轮子
3. 也不用改动现有的 image DOM

### 使用过程中遇到的问题

#### 对我引入的 el-image-viewer 报 You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders 错

报这个错是说明 vue-loader 没解析到 el-image-viewer 组件。

看了网上的解决思路，有很多说是 vue-loader 的版本问题。也有说需要加上 webpack.mix.js 的。

我们项目里 vue-loader 的版本是 15.9.8 应该没有问题。

最后在 webpack 的配置文件里发现了问题

```javascript
// webpack.config.base.js
{
    test: /\.vue$/,
    loader: 'vue-loader',
    include: srcPath, // 问题点
    // 更改成了
    // include: [srcPath, path.resolve('node_modules/element-ui/packages/image/src')], 
    // 注意：路径不要写错了。
    options: {
        transformAssetUrls: {
            icon: 'data'
        }
    }
},

// config/index.js
srcPath = resolve(__dirname, '../src'),
```

#### 为什么 element 里的其他组件就可以解析呢？

官方文档里写了的组件，官方已经为我们处理好了这些组件的引入导出，所以我们可以直接在 main.js 里 `import Element from 'element-ui'` 引入再 `Vue.use(Element)` 就好，vue-loader 就会解析到。

但是像 el-image-viewer 这种官方文档中没有，只是依附于 el-image 的组件，可能官方没有在最外层导出它，我们需要使用 el-image 才能使用它。

所以在没有用 el-image 却使用了它的情况下， 只解析 src 目录的 vue-loader 就解析不到它了。

### path.resolve()
